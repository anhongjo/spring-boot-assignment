<html lang="ko">
<head>
    <meta charSet="UTF-8">
    <title>회원 가입</title>
    <link rel="stylesheet" href="//stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"
          integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossOrigin="anonymous">
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>

    <script src="/js/register.js"></script>
</head>
<body>
<br>
<div style="background-color: #EEEEEE;" class="container">
    <br>
    <h2>회원 가입</h2>
    <form class="form-horizontal" method="post" action="/register" onSubmit="return isValidate(this);">
        <div class="form-group">
            <label for="inputName">이름</label>
            <div>
                <input class="form-control" type="text" name="name" id="inputName" required>
            </div>
        </div>

        <div class="form-group">
            <label for="inputUsername">ID</label>
            <div class="form-group">
                <input type="text" id="inputUsername" name="username" class="input-xlarge" required/>
                <button class="btn btn-secondary" name="idChk" id="btnIdChk" type="button"
                        onClick="fn_idCheck(this.form);" value="N">중복 확인
                </button>
                <small class="form-text text-muted">로그인 할 때 사용할 아이디입니다.</small>
            </div>
        </div>

        <div class="form-group">
            <label for="inputPassword">비밀번호</label>
            <div>
                <input class="form-control" id="inputPassword" type="password" name="password" required>
                <small class="form-text text-muted">비밀번호를 입력해주세요.</small>
            </div>
        </div>

        <div>
            <label for="inputPasswordRe">비밀번호 확인</label>
            <div>
                <input class="form-control" id="inputPasswordRe" type="password" name="password_re" required>
                <small class="form-text text-muted">비밀번호를 한번 더 입력해주세요.</small>
            </div>
        </div>

        <div>
            <label for="inputPhone">전화 번호</label>
            <div>
                <input type="text"
                       id="inputPhone"
                       class="form-control m-input"
                       maxLength="13"
                       placeholder="010-1234-5678" required>
            </div>
        </div>
        <br>
        <div class="form-group">
            <div class="controls">
                <input type="submit" value="회원 가입" class="btn btn-primary">
            </div>
        </div>
    </form>
</div>
</body>

<script>
    // 출처: https://juein.tistory.com/43
    let autoHypenPhone = function (str) {
        str = str.replace(/[^0-9]/g, '');
        let tmp = '';
        if (str.length < 4) {
            return str;
        } else if (str.length < 7) {
            tmp += str.substr(0, 3);
            tmp += '-';
            tmp += str.substr(3);
            return tmp;
        } else if (str.length < 11) {
            tmp += str.substr(0, 3);
            tmp += '-';
            tmp += str.substr(3, 3);
            tmp += '-';
            tmp += str.substr(6);
            return tmp;
        } else {
            tmp += str.substr(0, 3);
            tmp += '-';
            tmp += str.substr(3, 4);
            tmp += '-';
            tmp += str.substr(7);
            return tmp;
        }
    }

    const phoneNum = document.getElementById('inputPhone');
    phoneNum.onkeyup = function () {
        console.log(this.value);
        this.value = autoHypenPhone(this.value);
    }
</script>
</html>